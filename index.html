<html>
<head>
	<title>mdoc</title>

	<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
	<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/marked/0.3.2/marked.min.js"></script>

	<script type="text/javascript" src="mdoc.js"></script>
	<script type="text/javascript" src="semantic-ui/semantic.min.js"></script>

	<link rel="stylesheet" href="semantic-ui/semantic.min.css">
	<link rel="stylesheet" href="style.css">

	<script type="text/javascript">
		$(document).ready(function() {
			var mdoc = {};

			$.getJSON("index.json", function(data) {
				$(".main.menu .header").text(data.title);

				mdoc = new MDoc(data).load(function(m) {
					$.each(m.index.contents, function(i, grp) {
						$("#toc").append($("<div/>").addClass("header item").text(grp.group));

						$.each(grp.contents, function(d, doc) {
							var docHead = $("<div/>").addClass("item").text(doc.title);
							var docMenu = $("<div/>").addClass("menu");
							docHead.append(docMenu);
							$("#toc").append(docHead);

							$.each(doc.toc, function(t, toc) {
								docMenu.append($("<a/>").addClass("item").attr("href", "#" + toc.slug).text(toc.title))
								.click(function() {
									mdoc.navigate(doc, toc, $("#doc"));
								});
							});
						});
					});

					$(".ui.sticky").sticky({
						context: "#doc"
					});
				});
			});
		});
	</script>
</head>
<body>
	<div class="ui inverted main menu">
		<div class="container">
			<h2 class="ui inverted header">mdoc</h2>
		</div>
	</div>
	<div class="main container">
		<div class="ui right very close rail">
			<div id="toc" class="ui sticky fluid vertical menu"></div>
		</div>
		<div id="doc"></div>
	</div>
</body>
</html>